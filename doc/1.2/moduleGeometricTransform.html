<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DGtal: Geometric transformations</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/MathJax.js?config=TeX-MML-AM_CHTML/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="modern-doxygen-blue.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DGtal
   &#160;<span id="projectnumber">1.2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Geometric transformations </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#sectmoduleGeometricTransform1">Overview</a></li>
<li class="level1"><a href="#subsecRigid2D">Rigid transformations</a><ul><li class="level2"><a href="#secRigid2D">Rigid transformations in 2D discrete space</a></li>
<li class="level2"><a href="#secRigid3D">Rigid transformations in 3D discrete space</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><dl class="section user"><dt>Author(s) of this documentation: </dt><dd>Kacper Pluta </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2014/07/17</dd></dl>
<h1><a class="anchor" id="sectmoduleGeometricTransform1"></a>
Overview</h1>
<p>This module gather classes which represent geometric transformations.</p>
<h1><a class="anchor" id="subsecRigid2D"></a>
Rigid transformations</h1>
<p>Rigid transformations in \(\mathbb{R}^n\) are isometries which preserve in particular the distance and angles between every pair and triples of points respectively. The set of rigid transformations includes rotations, translations and reflections(excluded from the image processing applications from practical reasons), or combinations of those. Also an inverse of rigid transformation is rigid transformation therefore rigid transformation are bijective.</p>
<p>In general rigid transformation can be written like:</p>
<p class="formulaDsp">
\[ \begin{array}{l l} \mathcal{U}: \mathbb{R}^n &amp; \to \mathbb{R}^n \\ \mathbf{x} &amp; \mapsto \mathbf{R . x} + \mathbf{t} \end{array} \]
</p>
<p>where \(\textbf{R}\) denotes rotation matrix and \(\textbf{t}\) translation vector. Where discrete rigid transformations can be defined as follows:</p>
<p class="formulaDsp">
\[ U = \mathcal{D} \circ \mathcal{U}_{| \mathbb{Z}^n} \]
</p>
<p class="formulaDsp">
\[ T = \mathcal{D} \circ \mathcal{T}_{| \mathbb{Z}^n} = \mathcal{D} \circ (\mathcal{U}^{-1})_{| \mathbb{Z}^n} \]
</p>
<p>where \(\mathcal{D}\) is a standard rounding function (another interpolation method are for this moment not implemented in <a class="el" href="namespaceDGtal.html" title="DGtal is the top-level namespace which contains all DGtal functions and types.">DGtal</a>). Unfortunately discrete rigid transformations are in general nighter isometries nor bijective. From above difficulties we can consider two models of discrete rigid transformations: forward - Lagrangian and backward - Eulerian. First of them consists of computing \(U\) and second \(T\) but from the perspective of transformed space therefore all its points have defined value, which is not always true for the forward model.</p>
<h2><a class="anchor" id="secRigid2D"></a>
Rigid transformations in 2D discrete space</h2>
<p><a class="el" href="namespaceDGtal.html" title="DGtal is the top-level namespace which contains all DGtal functions and types.">DGtal</a> contains both models, and below snippets of code present how to apply them for a 2D image. In order to illustrate how to use discrete rigid transformation we are going to:</p>
<p>a) add those includes: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;DGtal/images/RigidTransformation2D.h&quot;</span></div>
</div><!-- fragment --><p> b) define these types: </p><div class="fragment"><div class="line">  <span class="keyword">typedef</span> ForwardRigidTransformation2D &lt; Space &gt; ForwardTrans;</div>
<div class="line">  <span class="keyword">typedef</span> BackwardRigidTransformation2D &lt; Space &gt; BackwardTrans;</div>
<div class="line">  <span class="keyword">typedef</span> ConstImageAdapter&lt;Image, Domain, BackwardTrans, Image::Value, Identity &gt; MyImageBackwardAdapter;</div>
<div class="line">  <span class="keyword">typedef</span> DomainRigidTransformation2D &lt; Domain, ForwardTrans &gt; MyDomainTransformer;</div>
<div class="line">  <span class="keyword">typedef</span> MyDomainTransformer::Bounds Bounds;</div>
</div><!-- fragment --><p> where DomainRigidTransformation2D is a helper functor which returns lower and upper bounds of transformed domain.</p>
<p>c) create transformation by providing information about origin, angle in radians, and translation:</p>
<div class="fragment"><div class="line">    ForwardTrans forwardTrans( <a class="code" href="testAstroid2D_8cpp.html#ac914bb734ccb5a7c569747c1e699c1aa">RealPoint</a> ( 5, 5 ), M_PI_4, <a class="code" href="sphereCotangentLaplaceOperator_8cpp.html#a88ea88dffef2560dd8d9e065d8bb8265">RealVector</a>( 3, -3 ) );</div>
<div class="line">    BackwardTrans backwardTrans( <a class="code" href="testAstroid2D_8cpp.html#ac914bb734ccb5a7c569747c1e699c1aa">RealPoint</a> ( 5, 5 ), M_PI_4, <a class="code" href="sphereCotangentLaplaceOperator_8cpp.html#a88ea88dffef2560dd8d9e065d8bb8265">RealVector</a>( 3, -3 ) );</div>
<div class="ttc" id="asphereCotangentLaplaceOperator_8cpp_html_a88ea88dffef2560dd8d9e065d8bb8265"><div class="ttname"><a href="sphereCotangentLaplaceOperator_8cpp.html#a88ea88dffef2560dd8d9e065d8bb8265">RealVector</a></div><div class="ttdeci">Z3i::RealVector RealVector</div><div class="ttdef"><b>Definition:</b> <a href="sphereCotangentLaplaceOperator_8cpp_source.html#l00071">sphereCotangentLaplaceOperator.cpp:71</a></div></div>
<div class="ttc" id="atestAstroid2D_8cpp_html_ac914bb734ccb5a7c569747c1e699c1aa"><div class="ttname"><a href="testAstroid2D_8cpp.html#ac914bb734ccb5a7c569747c1e699c1aa">RealPoint</a></div><div class="ttdeci">Z2i::RealPoint RealPoint</div><div class="ttdef"><b>Definition:</b> <a href="testAstroid2D_8cpp_source.html#l00046">testAstroid2D.cpp:46</a></div></div>
</div><!-- fragment --><p> d) if needed create a transformed domain eg: </p><div class="fragment"><div class="line">    MyDomainTransformer domainTransformer ( forwardTrans );</div>
</div><!-- fragment --><div class="fragment"><div class="line">    Bounds bounds = domainTransformer ( image.domain() );</div>
<div class="line">    <a class="code" href="testSimpleRandomAccessRangeFromPoint_8cpp.html#acd532b318489cd93df57e0b3d136d050">Domain</a> transformedDomain ( bounds.first, bounds.second );</div>
<div class="ttc" id="atestSimpleRandomAccessRangeFromPoint_8cpp_html_acd532b318489cd93df57e0b3d136d050"><div class="ttname"><a href="testSimpleRandomAccessRangeFromPoint_8cpp.html#acd532b318489cd93df57e0b3d136d050">Domain</a></div><div class="ttdeci">HyperRectDomain&lt; Space &gt; Domain</div><div class="ttdef"><b>Definition:</b> <a href="testSimpleRandomAccessRangeFromPoint_8cpp_source.html#l00044">testSimpleRandomAccessRangeFromPoint.cpp:44</a></div></div>
</div><!-- fragment --><p> e1) apply rigid transformation to image with forward model: </p><div class="fragment"><div class="line">      <span class="keywordflow">for</span> ( <a class="code" href="greedy-plane-segmentation-ex2_8cpp.html#a6d06fad433cff067dfcbbbf16d6e2dbf">Domain::ConstIterator</a> it = image.domain().begin(); it != image.domain().end(); ++it )</div>
<div class="line">      {</div>
<div class="line">        forwardTransformedImage.setValue ( forwardTrans ( *it ), image ( *it ) );</div>
<div class="line">      }</div>
<div class="ttc" id="agreedy-plane-segmentation-ex2_8cpp_html_a6d06fad433cff067dfcbbbf16d6e2dbf"><div class="ttname"><a href="greedy-plane-segmentation-ex2_8cpp.html#a6d06fad433cff067dfcbbbf16d6e2dbf">ConstIterator</a></div><div class="ttdeci">MyDigitalSurface::ConstIterator ConstIterator</div><div class="ttdef"><b>Definition:</b> <a href="greedy-plane-segmentation-ex2_8cpp_source.html#l00093">greedy-plane-segmentation-ex2.cpp:93</a></div></div>
</div><!-- fragment --><p> e2) or with backward which can be used with <a class="el" href="classDGtal_1_1ConstImageAdapter.html" title="Aim: implements a const image adapter with a given domain (i.e. a subdomain) and 2 functors : g for d...">ConstImageAdapter</a> or <a class="el" href="classDGtal_1_1ImageAdapter.html" title="Aim: implements an image adapter with a given domain (i.e. a subdomain) and 3 functors : g for domain...">ImageAdapter</a>: </p><div class="fragment"><div class="line">      MyImageBackwardAdapter backwardImageAdapter ( image, transformedDomain , backwardTrans, idD );</div>
</div><!-- fragment --><p> Below image presents result for froward model and image "Church.pgm" </p><div class="image">
<img src="church_forward.jpg" alt=""/>
</div>
 <p>and for backward as well: </p><div class="image">
<img src="church_backward.jpg" alt=""/>
</div>
 <h2><a class="anchor" id="secRigid3D"></a>
Rigid transformations in 3D discrete space</h2>
<p>Discrete rigid transformations in 3D were implemented thanks to Rodrigues' rotation formula <a class="el" href="citelist.html#CITEREF_belongieRot">[11]</a> which allow defining rotation around any arbitrary axis with exception for \((0,0,0)\). Usage is analogous to the 2D implementation and can be illustrated in the following steps:</p>
<p>a) add those includes: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;DGtal/images/RigidTransformation3D.h&quot;</span></div>
</div><!-- fragment --><p> b) define these types: </p><div class="fragment"><div class="line">  <span class="keyword">typedef</span> ForwardRigidTransformation3D &lt; Space &gt; ForwardTrans;</div>
<div class="line">  <span class="keyword">typedef</span> BackwardRigidTransformation3D &lt; Space &gt; BackwardTrans;</div>
<div class="line">  <span class="keyword">typedef</span> ConstImageAdapter&lt;Image, Domain, BackwardTrans, Image::Value, Identity &gt; MyImageBackwardAdapter;</div>
<div class="line">  <span class="keyword">typedef</span> DomainRigidTransformation3D &lt; Domain, ForwardTrans &gt; MyTransformedDomain;</div>
<div class="line">  <span class="keyword">typedef</span> MyTransformedDomain::Bounds Bounds;</div>
</div><!-- fragment --><p> where DomainRigidTransformation3D is a helper functor which returns lower and upper bounds of transformed domain.</p>
<p>c) create transformation by providing information about origin, rotation axis (not need to be normalize), angle in radians, and translation:</p>
<div class="fragment"><div class="line">    ForwardTrans forwardTrans( <a class="code" href="testClone2_8cpp.html#a15e9592ccc512dc691b46185e6814758">Point</a> ( 5, 5, 5 ), RealVector ( 1, 0, 1 ), M_PI_4, <a class="code" href="sphereCotangentLaplaceOperator_8cpp.html#a88ea88dffef2560dd8d9e065d8bb8265">RealVector</a>( 3, -3, 3 ) );</div>
<div class="line">    BackwardTrans backwardTrans( <a class="code" href="testClone2_8cpp.html#a15e9592ccc512dc691b46185e6814758">Point</a> ( 5, 5, 5 ), RealVector ( 1, 0, 1 ), M_PI_4, <a class="code" href="sphereCotangentLaplaceOperator_8cpp.html#a88ea88dffef2560dd8d9e065d8bb8265">RealVector</a>( 3, -3, 3 ) );</div>
<div class="ttc" id="atestClone2_8cpp_html_a15e9592ccc512dc691b46185e6814758"><div class="ttname"><a href="testClone2_8cpp.html#a15e9592ccc512dc691b46185e6814758">Point</a></div><div class="ttdeci">MyPointD Point</div><div class="ttdef"><b>Definition:</b> <a href="testClone2_8cpp_source.html#l00383">testClone2.cpp:383</a></div></div>
</div><!-- fragment --><p> d) if needed create a transformed domain eg: </p><div class="fragment"><div class="line">    MyTransformedDomain domainForwardTrans ( forwardTrans );</div>
</div><!-- fragment --><div class="fragment"><div class="line">    Bounds bounds = domainForwardTrans ( image.domain() );</div>
<div class="line">    <a class="code" href="testSimpleRandomAccessRangeFromPoint_8cpp.html#acd532b318489cd93df57e0b3d136d050">Domain</a> transformedDomain ( bounds.first, bounds.second );</div>
</div><!-- fragment --><p> e1) apply rigid transformation to image with forward model: </p><div class="fragment"><div class="line">      <span class="keywordflow">for</span> ( <a class="code" href="greedy-plane-segmentation-ex2_8cpp.html#a6d06fad433cff067dfcbbbf16d6e2dbf">Domain::ConstIterator</a> it = image.domain().begin(); it != image.domain().end(); ++it )</div>
<div class="line">      {</div>
<div class="line">        transformed.setValue ( forwardTrans ( *it ), image ( *it ) );</div>
<div class="line">      }</div>
</div><!-- fragment --><p> e2) or with backward which can be used with <a class="el" href="classDGtal_1_1ConstImageAdapter.html" title="Aim: implements a const image adapter with a given domain (i.e. a subdomain) and 2 functors : g for d...">ConstImageAdapter</a> or <a class="el" href="classDGtal_1_1ImageAdapter.html" title="Aim: implements an image adapter with a given domain (i.e. a subdomain) and 3 functors : g for domain...">ImageAdapter</a>: </p><div class="fragment"><div class="line">      MyImageBackwardAdapter adapter ( image, transformedDomain, backwardTrans, idD );</div>
</div><!-- fragment --><p> Below image presents result for froward model and image "cat10.vol" </p><div class="image">
<img src="cat10_forward.jpg" alt=""/>
</div>
 <p>and for backward as well: </p><div class="image">
<img src="cat10_backward.jpg" alt=""/>
</div>
  </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jun 1 2021 17:06:31 for DGtal by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
