<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>DGtal: Helpers for digital surfaces</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DGtal
   &#160;<span id="projectnumber">0.5.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Helpers for digital surfaces </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#dgtal_helpsurf_sec1">The 2D case: the boundary is a sequence of cells</a></li>
<li class="level1"><a href="#dgtal_helpsurf_sec2">Tracking a 3D boundary to build a surface.</a></li>
<li class="level1"><a href="#dgtal_helpsurf_sec3">Extracting surface connected components</a></li>
</ul>
</div>
<div class="textblock"><dl class="section user"><dt>Author(s) of this documentation:</dt><dd>Bertrand Kerautret and Jacques-Olivier Lachaud.</dd></dl>
<p>Part of the <a class="el" href="TopologyPackage.html">Topology package</a>.</p>
<p>This part of the manual describes how to use the helper class <a class="el" href="classDGtal_1_1Surfaces.html" title="Aim: A utility class for constructing surfaces (i.e. set of (n-1)-cells).">Surfaces</a> to build digital surfaces, closed or open, or contours within digital surfaces. A lot of the ideas, concepts, algorithms, documentation and code is a backport from <a href="https://gforge.liris.cnrs.fr/projects/imagene">ImaGene</a>.</p>
<p>All the code presented here require: </p>
<div class="fragment"><div class="line"><span class="preprocessor">      #include &quot;DGtal/topology/helpers/Surfaces.h&quot;</span></div>
</div><!-- fragment --><dl class="section note"><dt>Note:</dt><dd>This class is useful if you wish only to obtain the set of surfels of a given digital surface or if you wish to obtain 2D contours (in 2D or 3D). If you require more advanced operations on surfaces (for instance using afterwards the topology defined on the surface), it is better to wrap a <a class="el" href="classDGtal_1_1DigitalSurface.html" title="Aim: Represents a set of n-1-cells in a nD space, together with adjacency relation between these cell...">DigitalSurface</a> object around your surface of interest, see <a class="el" href="dgtal_digital_surface.html">Digital surfaces</a>.</dd></dl>
<h1><a class="anchor" id="dgtal_helpsurf_sec1"></a>
The 2D case: the boundary is a sequence of cells</h1>
<p>The surfaces classes offers the possibility to extract an open or closed contour as a sequence of surfels obtained from a DigitalSet and a starting surfel. The full code of this example is available in file <a href="ctopo-2_8cpp-example.html">ctopo-2.cpp </a>.</p>
<p>The first step to extract the surfel boudary of a 2D digital set is to obtain an initial boundary surfel: </p>
<div class="fragment"><div class="line">      aCell = <a class="code" href="classDGtal_1_1Surfaces.html#ab7cb9762acdb10a8e91ac27f936c7ff9">Surfaces&lt;Z2i::KSpace&gt;::findABel</a>(ks, set2d);       </div>
</div><!-- fragment --><p>The first surfel can also be displayed in red with <a class="el" href="classDGtal_1_1Board2D.html" title="Aim: This class specializes a &#39;Board&#39; class so as to display DGtal objects more naturally (with &lt;&lt;)...">Board2D</a>: </p>
<div class="fragment"><div class="line">       Board2D board;</div>
<div class="line">       board &lt;&lt; image.domain() &lt;&lt; set2d; <span class="comment">// display domain and set</span></div>
<div class="line">       board &lt;&lt; CustomStyle( aCell.className(), <span class="keyword">new</span> CustomColors(  Board2D::Color( 255, 0, 0 ),</div>
<div class="line">                                                                   Board2D::Color( 192, 0, 0 ) ));</div>
<div class="line">       board &lt;&lt; aCell;</div>
</div><!-- fragment --><div class="image">
<img src="ctopo2a.png" alt="ctopo2a.png"/>
<div class="caption">
Start surfel before a tracking (in red).</div></div>
 <p>Then you can extract the sequence of consecutive surfels: </p>
<div class="fragment"><div class="line">     std::vector&lt;Z2i::SCell&gt; vectBdrySCell;</div>
<div class="line">     SurfelAdjacency&lt;2&gt; SAdj( <span class="keyword">true</span> );</div>
<div class="line">     <a class="code" href="classDGtal_1_1Surfaces.html#a4b4a4cd531b56d91d0ec1931f81b3884">Surfaces&lt;Z2i::KSpace&gt;::track2DBoundary</a>( vectBdrySCell,</div>
<div class="line">                                             ks, SAdj, set2d, aCell );</div>
</div><!-- fragment --><p> and display it: </p>
<div class="fragment"><div class="line">     GradientColorMap&lt;int&gt; cmap_grad( 0, vectBdrySCell.size() );</div>
<div class="line">     cmap_grad.addColor( Board2D::Color( 50, 50, 255 ) );</div>
<div class="line">     cmap_grad.addColor( Board2D::Color( 255, 0, 0 ) );</div>
<div class="line">     cmap_grad.addColor( Board2D::Color( 255, 255, 10 ) );</div>
<div class="line">   </div>
<div class="line">     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> d=0;</div>
<div class="line">     std::vector&lt;Z2i::SCell&gt;::iterator it;</div>
<div class="line">     <span class="keywordflow">for</span> ( it=vectBdrySCell.begin() ; it != vectBdrySCell.end(); it++ ){</div>
<div class="line">          board&lt;&lt; CustomStyle((*it).className() ,</div>
<div class="line">                              <span class="keyword">new</span> CustomColors( Board2D::Color::Black,</div>
<div class="line">                                                cmap_grad( d )))&lt;&lt; *it;</div>
<div class="line">          d++;</div>
<div class="line">    }</div>
</div><!-- fragment --><p> You will obtain the following ordered sequence of surfels:</p>
<div class="image">
<img src="ctopo2b.png" alt="ctopo2b.png"/>
<div class="caption">
Tracking of a closed 2D contour.</div></div>
 <p>The resulting sequence of surfels does not necessary present an open contour (try for instance image "samples/circleR10modif.pgm"):</p>
<div class="image">
<img src="ctopo2c.png" alt="ctopo2c.png"/>
<div class="caption">
Tracking of an open 2D contour.</div></div>
 <h1><a class="anchor" id="dgtal_helpsurf_sec2"></a>
Tracking a 3D boundary to build a surface.</h1>
<p>With only few modifications we can apply the same extraction on 3D surfel set. The file <a href="ctopo-2-3d_8cpp-example.html">ctopo-2-3d.cpp </a> shows the same previous example adapted in 3D.</p>
<p>with the same code we can get a surfel boundary: </p>
<div class="fragment"><div class="line">   <a class="code" href="namespaceDGtal_1_1Z3i.html#a96583b392d71bd493733117e3136d82b">Z3i::SCell</a> aCell = <a class="code" href="classDGtal_1_1Surfaces.html#ab7cb9762acdb10a8e91ac27f936c7ff9">Surfaces&lt;Z3i::KSpace&gt;::findABel</a>(ks, set3d);</div>
</div><!-- fragment --><p>From this SCell all the surfel connected sets can be extracted: </p>
<div class="fragment"><div class="line">   <span class="comment">// Extracting all boundary surfels which are connected to the initial boundary Cell.</span></div>
<div class="line">   <a class="code" href="classDGtal_1_1Surfaces.html#a24fcfb2a607d919c84250bc9965cb86b">Surfaces&lt;Z3i::KSpace&gt;::trackBoundary</a>( vectBdrySCellALL,</div>
<div class="line">                                         ks,SAdj, set3d, aCell );</div>
</div><!-- fragment --><p>To see both initial surfel and the surfel set, we can use the transparent mode:</p>
<div class="fragment"><div class="line">   viewer &lt;&lt; SetMode3D((*(vectBdrySCellALL.begin())).className(), <span class="stringliteral">&quot;Transparent&quot;</span>);</div>
</div><!-- fragment --><p>To avoid surfel superposition we need to increase with a small shift the surfel size, for this purpose you can add the following key: </p>
<div class="fragment"><div class="line">   viewer &lt;&lt; <a class="code" href="classDGtal_1_1Display3D.html#a96b45e0a0c762c14c0e5e27045d1ca04a4db609bbe1edad3885d830ca83394bda">Viewer3D::shiftSurfelVisu</a>; </div>
</div><!-- fragment --><p> or use the special mode "Highlighted" which increase automaticly the surfel size.</p>
<p>You can obtain for instance the following visualisation:</p>
<div class="image">
<img src="ctopo3dSurfel.png" alt="ctopo3dSurfel.png"/>
<div class="caption">
Tracking surfaces in 3D (start surfel in green).</div></div>
 <p>Since in 3D there are several choice for the direction used to exctract surfel boundary, we can specify the constant direction need to drive the surfel extraction:</p>
<div class="fragment"><div class="line">   <span class="comment">// Extract the boundary contour associated to the initial surfel in its first direction</span></div>
<div class="line">    <a class="code" href="classDGtal_1_1Surfaces.html#a4b4a4cd531b56d91d0ec1931f81b3884">Surfaces&lt;Z3i::KSpace&gt;::track2DBoundary</a>( vectBdrySCell,</div>
<div class="line">                                            ks, *(ks.sDirs( aCell )),SAdj, set3d, aCell );</div>
</div><!-- fragment --><p>After extracting the two surfels cut you may obtain the following visualisation:</p>
<div class="image">
<img src="ctopo3dSurfelCut.png" alt="ctopo3dSurfelCut.png"/>
<div class="caption">
Tracking surfaces and slices in 3D (start surfel in green).</div></div>
 <h1><a class="anchor" id="dgtal_helpsurf_sec3"></a>
Extracting surface connected components</h1>
<p>The class <a class="el" href="classDGtal_1_1Surfaces.html">Surfaces</a> provides other useful function to extract connected boundary surfels from a digital set and given a surfel adjacency definition. The example <a class="el" href="3dKSSurfaceExtraction_8cpp_source.html">3dKSSurfaceExtraction.cpp</a> shows an example of such an extraction.</p>
<p>From a domain we construct a DigitalSet inserting points under given conditions (see. <a href="3dKSSurfaceExtraction_8cpp-example.html">3dKSSurfaceExtraction.cpp </a> for more details)</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;DGtal/helpers/Surfaces.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;DGtal/topology/KhalimskySpaceND.h&quot;</span></div>
<div class="line">...</div>
<div class="line">Domain domain( p1, p2);</div>
<div class="line"><a class="code" href="namespaceDGtal_1_1Z2i.html#a371252c324e496cf8650757c1a2b4eb0">DigitalSet</a> diamond_set( domain );</div>
<div class="line">...</div>
<div class="line">  diamond_set.insertNew( *it );</div>
<div class="line">....</div>
</div><!-- fragment --><p>With this domain bounding points (p1, p2), a KhalimskySpace is constructed and a <a class="el" href="classDGtal_1_1SurfelAdjacency.html" title="Aim: Represent adjacencies between surfel elements, telling if it follows an interior to exterior ord...">SurfelAdjacency</a> definition is introduced.</p>
<div class="fragment"><div class="line"> KSpace K;</div>
<div class="line"> K.init(p1, p2, <span class="keyword">true</span>);</div>
<div class="line"> SurfelAdjacency&lt;3&gt; SAdj( <span class="keyword">true</span> );</div>
</div><!-- fragment --><p>Then we can extract all connected surfels from the digitalSet surface :</p>
<div class="fragment"><div class="line">  SetPredicate&lt;DigitalSet&gt; shape_set_predicate( diamond_set );</div>
<div class="line">  <a class="code" href="classDGtal_1_1Surfaces.html#a7c70171234046344fa0b089373424171">Surfaces&lt;KSpace&gt;::extractAllConnectedSCell</a>(vectConnectedSCell,K, SAdj, shape_set_predicate);</div>
</div><!-- fragment --><p>After processing a simple display of each resulting connecting component you can obtain such a visualisation:</p>
<div class="image">
<img src="KSurfelsConnectedOrientExt.png" alt="KSurfelsConnectedOrientExt.png"/>
<div class="caption">
Visualisation of connected set of SignefKhalimskySpaceND</div></div>
<p>Here since the last argument is set to true, the resulting SignedKhalimskySpaceND are signed in order to indicate the direction of exterior. You can also get the SignefKhalimskySpaceND with default sign:</p>
<div class="fragment"><div class="line">  <a class="code" href="classDGtal_1_1Surfaces.html#a7c70171234046344fa0b089373424171">Surfaces&lt;KSpace&gt;::extractAllConnectedSCell</a>(vectConnectedSCell,K, SAdj, shape_set_predicate, <span class="keyword">false</span>);</div>
</div><!-- fragment --><p>and you will get the resulting cell display:</p>
<div class="image">
<img src="KSurfelsConnectedDefaultOrient.png" alt="KSurfelsConnectedDefaultOrient.png"/>
<div class="caption">
Visualisation of connected set of oriented surfels of a KhalimskySpaceND.</div></div>
 </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jun 6 2012 20:20:24 for DGtal by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1
</small></address>
</body>
</html>
